# TokenMaster (Tampermonkey Token 管理器)

一个油猴脚本，用于在当前网页查看/编辑并保存 Token 相关数据（`localStorage` + `Cookie`），支持历史记录，以及导入/导出备份。

## 功能

- **当前编辑**：列出当前站点的 `localStorage` 与 `Cookie`，可直接编辑，点击“保存更改并刷新”应用。
- **保存记录**：把当前数据快照保存到历史记录（按 `hostname` 区分网站）。
- **历史记录**：
  - 重命名记录
  - 一键加载并刷新
  - 删除
  - **导出单条记录**（保留 `host` 信息，便于跨设备/跨浏览器导入）
- **导入/导出**：
  - 在“历史记录”里：`导出记录` 默认只导出**当前网址（hostname）**的数据
  - 在“导入/导出”Tab 里：支持**全量导出（所有网址）**
  - 导入：支持单条 / 多条 / 全量格式（脚本会自动识别）

## 安装

1. 安装浏览器扩展 **Tampermonkey（油猴）**。
2. 点击`user.js`
3. 打开任意网页，右下角会出现 `Token管理` 按钮。

## 重要：启用 Cookie 访问权限（必须）

否则 `GM_cookie` 可能无法读取/写入 Cookie（尤其是一些受限制的 Cookie），导入/导出与“当前编辑”的 Cookie 部分会不完整。

请在油猴里设置：

- `油猴设置` -> `高级` -> `允许脚本访问 Cookie` -> 选择 `ALL`

## 使用说明

- 导出当前网址历史记录：
  - 打开面板 -> `历史记录` -> `导出记录`（只导出当前 `hostname` 的数据）
- 导入记录（单条/多条/全量）：
  - 打开面板 -> `历史记录` -> `导入记录` -> 粘贴 JSON -> 选择“合并导入”或“覆盖导入”
  - 说明：
    - “覆盖导入”只对**全量数据**有意义；单条/多条导入会按记录 `id` 追加或更新
- 导出单条记录（保留不变）：
  - `历史记录` 列表里点某条记录的 `导出`

## 数据存储与安全提示

- 数据保存在 Tampermonkey 存储中（Key：`token_manager_records`）。
- 导出的 JSON 里通常包含敏感信息（登录态、Token、Cookie）。请勿发给不可信的人或上传到公开位置。
